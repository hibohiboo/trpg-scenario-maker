# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é–¢ä¿‚ç®¡ç†æ©Ÿèƒ½ ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

## ç›®æ¨™
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ã‚°ãƒ©ãƒ•DBã§ç®¡ç†
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é–“ã®é–¢ä¿‚ã‚’åŒæ–¹å‘ã®çŸ¢å°ã§è¡¨ç¤ºï¼ˆAâ†’Bã¨Bâ†’Aã¯åˆ¥ç®¡ç†ï¼‰
- çŸ¢å°ã«é–¢ä¿‚åã‚’è¡¨ç¤º
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¦ç´ ï¼šIDã€åå‰ã€èª¬æ˜

## é€²æ—çŠ¶æ³

### âœ… å®Œäº†ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»APIå±¤ï¼‰
- [x] ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ»é–¢ä¿‚æ€§ã®ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆValibotï¼‰
- [x] ã‚°ãƒ©ãƒ•DBã‚¹ã‚­ãƒ¼ãƒè¿½åŠ ï¼ˆCharacter/Relationshipãƒãƒ¼ãƒ‰ãƒ»ã‚¨ãƒƒã‚¸ï¼‰
- [x] ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…ï¼ˆCRUDæ“ä½œï¼‰
- [x] é–¢ä¿‚æ€§ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…ï¼ˆåŒæ–¹å‘é–¢ä¿‚ç®¡ç†ï¼‰
- [x] çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè£…ãƒ»å®Ÿè¡Œ
- [x] lintãƒ»å‹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
- [x] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰APIå®Ÿè£…ï¼ˆgraphdbWorkerClientçµŒç”±ï¼‰
- [x] Workerãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…ãƒ»çµ±åˆ
- [x] å‹æ¨è«–æ©Ÿèƒ½è¿½åŠ ï¼ˆGlobalHandlerMapï¼‰

### âœ… å®Œäº†ï¼ˆçŠ¶æ…‹ç®¡ç†ãƒ»Hookså±¤ï¼‰
- [x] ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”¨Redux Sliceå®Ÿè£…ï¼ˆcharacterSlice.tsï¼‰
- [x] ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è¦§å–å¾—Hookå®Ÿè£…ï¼ˆuseCharacterListï¼‰
- [x] é–¢ä¿‚æ€§ç”¨Redux Sliceå®Ÿè£…ï¼ˆrelationshipSlice.tsï¼‰
- [x] é–¢ä¿‚æ€§æ“ä½œç”¨Hookså®Ÿè£…
  - [x] useCharacterRelationshipsï¼ˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®é–¢ä¿‚æ€§å–å¾—ï¼‰
  - [x] useCreateRelationshipï¼ˆé–¢ä¿‚æ€§ä½œæˆï¼‰
  - [x] useUpdateRelationshipï¼ˆé–¢ä¿‚æ€§æ›´æ–°ï¼‰
  - [x] useDeleteRelationshipï¼ˆé–¢ä¿‚æ€§å‰Šé™¤ï¼‰
  - [x] useAllRelationshipsï¼ˆå…¨é–¢ä¿‚æ€§å–å¾—ï¼‰

### âœ… å®Œäº†ï¼ˆUIå±¤ - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
- [x] UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
  - [x] CharacterListï¼ˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è¦§è¡¨ç¤ºï¼‰
  - [x] RelationshipListï¼ˆé–¢ä¿‚æ€§ä¸€è¦§è¡¨ç¤ºï¼‰
  - [x] RelationshipFormï¼ˆé–¢ä¿‚æ€§ä½œæˆ/ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ï¼‰
  - [x] DeleteRelationshipModalï¼ˆå‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰
  - [x] CharacterRelationshipPageï¼ˆçµ±åˆãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
- [x] typeså®šç¾©ï¼ˆCharacter, Relationship, RelationshipFormDataï¼‰
- [x] uiãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã®exportè¨­å®š

### ğŸš§ ä½œæ¥­ä¸­ï¼ˆUIå±¤ - ãƒšãƒ¼ã‚¸çµ±åˆï¼‰
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒšãƒ¼ã‚¸å®Ÿè£…ï¼ˆcontainerså±¤ï¼‰
  - [ ] useCharacterRelationshipPageãƒ•ãƒƒã‚¯ä½œæˆ
  - [ ] CharacterRelationshipPageã‚³ãƒ³ãƒ†ãƒŠä½œæˆ
- [ ] ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¿½åŠ 
  - [ ] /charactersãƒ«ãƒ¼ãƒˆè¿½åŠ 
  - [ ] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ 
- [ ] å‹•ä½œç¢ºèªãƒ»ãƒ‡ãƒãƒƒã‚°

### ğŸ“ æœªç€æ‰‹ï¼ˆãƒ†ã‚¹ãƒˆãƒ»ã‚°ãƒ©ãƒ•å¯è¦–åŒ–ï¼‰
- [ ] åŸºæœ¬æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
- [ ] RelationshipGraphï¼ˆé–¢ä¿‚æ€§ã‚°ãƒ©ãƒ•å¯è¦–åŒ–ï¼‰å®Ÿè£…
- [ ] BDDãƒ†ã‚¹ãƒˆä½œæˆãƒ»å®Ÿè¡Œ

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- ã‚°ãƒ©ãƒ•DB: KÃ¹zu WASMï¼ˆæ—¢å­˜ï¼‰
- ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼: Valibot
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: React
- ã‚°ãƒ©ãƒ•å¯è¦–åŒ–: TBDï¼ˆreact-flow, cytoscape.jsç­‰ã‚’æ¤œè¨ï¼‰

## è¨­è¨ˆæ–¹é‡
- åŒæ–¹å‘é–¢ä¿‚ã¯åˆ¥ã‚¨ãƒƒã‚¸ã¨ã—ã¦ç®¡ç†ï¼ˆAâ†’Bã¨Bâ†’Aã¯ç‹¬ç«‹ï¼‰
- é–¢ä¿‚åã¯ã‚¨ãƒƒã‚¸ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦ä¿å­˜
- ã‚°ãƒ©ãƒ•DBã‚’æ´»ç”¨ã—ãŸæŸ”è»Ÿãªã‚¯ã‚¨ãƒªã‚’å®Ÿç¾

## æ¬¡ã«è¡Œã†ã‚¿ã‚¹ã‚¯ï¼ˆå„ªå…ˆåº¦é †ï¼‰

### 1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒšãƒ¼ã‚¸çµ±åˆ ğŸ”¥
**ãƒ•ã‚¡ã‚¤ãƒ«**:
- `apps/frontend/src/entities/character/hooks/useCharacterRelationshipPage.ts`
- `apps/frontend/src/entities/character/containers/CharacterRelationshipPage.tsx`
- `apps/frontend/src/page/characters/ui/Page.tsx`

**å®Ÿè£…å†…å®¹**:
- `useCharacterRelationshipPage`: ãƒšãƒ¼ã‚¸ãƒ­ã‚¸ãƒƒã‚¯ã‚’çµ±åˆã™ã‚‹Hook
  - useCharacterList, useAllRelationships, useCreateRelationshipç­‰ã‚’çµ±åˆ
  - ãƒ¢ãƒ¼ãƒ€ãƒ«é–‹é–‰ãƒ­ã‚¸ãƒƒã‚¯
  - ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†
- CharacterRelationshipPageã‚³ãƒ³ãƒ†ãƒŠ: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨Hookã‚’æ¥ç¶š
- Page.tsx: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç”¨ã®re-export

**ä¾å­˜é–¢ä¿‚**:
- âœ… relationshipSliceï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
- âœ… é–¢ä¿‚æ€§Hooksï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
- âœ… UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

### 2. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¿½åŠ  ğŸ”¥
**ãƒ•ã‚¡ã‚¤ãƒ«**:
- `apps/frontend/src/app/routes/index.tsx`
- `apps/frontend/src/app/Router.tsx`ï¼ˆã¾ãŸã¯App.tsxï¼‰

**å®Ÿè£…å†…å®¹**:
- `/characters`ãƒ«ãƒ¼ãƒˆè¿½åŠ 
- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ã€Œã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†ã€ãƒªãƒ³ã‚¯è¿½åŠ 

**ä¾å­˜é–¢ä¿‚**:
- â³ CharacterRelationshipPageã‚³ãƒ³ãƒ†ãƒŠï¼ˆã‚¿ã‚¹ã‚¯1ï¼‰

### 3. å‹•ä½œç¢ºèªãƒ»ãƒ‡ãƒãƒƒã‚°
**ç¢ºèªé …ç›®**:
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è¦§ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- é–¢ä¿‚æ€§ä¸€è¦§ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- é–¢ä¿‚æ€§ã®ä½œæˆãŒå‹•ä½œã™ã‚‹ã‹
- é–¢ä¿‚æ€§ã®ç·¨é›†ãŒå‹•ä½œã™ã‚‹ã‹
- é–¢ä¿‚æ€§ã®å‰Šé™¤ãŒå‹•ä½œã™ã‚‹ã‹
- ãƒ¢ãƒ¼ãƒ€ãƒ«ã®é–‹é–‰ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹

### 4. BDDãƒ†ã‚¹ãƒˆå®Ÿè£…
**ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª**:
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¡¨ç¤º
- é–¢ä¿‚æ€§ã®ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- åŒæ–¹å‘é–¢ä¿‚ã®ç®¡ç†
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**ä¾å­˜é–¢ä¿‚**:
- â³ ãƒšãƒ¼ã‚¸çµ±åˆãƒ»å‹•ä½œç¢ºèªï¼ˆã‚¿ã‚¹ã‚¯3ï¼‰

### 5. ã‚°ãƒ©ãƒ•å¯è¦–åŒ–å®Ÿè£…ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
**å®Ÿè£…å†…å®¹**:
- react-flowã¾ãŸã¯cytoscape.jsã‚’ä½¿ç”¨
- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é–“ã®é–¢ä¿‚ã‚’è¦–è¦šçš„ã«è¡¨ç¤º
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒ¼ãƒ‰æ“ä½œ

**ä¾å­˜é–¢ä¿‚**:
- â³ åŸºæœ¬æ©Ÿèƒ½ã®å‹•ä½œç¢ºèªï¼ˆã‚¿ã‚¹ã‚¯3ï¼‰

## å®Ÿè£…çŠ¶æ³ã‚µãƒãƒªãƒ¼

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | çŠ¶æ…‹ | å®Œäº†ç‡ |
|---------|------|--------|
| ã‚¹ã‚­ãƒ¼ãƒå±¤ï¼ˆValibotï¼‰ | âœ…å®Œäº† | 100% |
| GraphDBå±¤ï¼ˆãƒªãƒã‚¸ãƒˆãƒªï¼‰ | âœ…å®Œäº† | 100% |
| Workerå±¤ï¼ˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼‰ | âœ…å®Œäº† | 100% |
| APIå±¤ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰ | âœ…å®Œäº† | 100% |
| çŠ¶æ…‹ç®¡ç†å±¤ï¼ˆReduxï¼‰ | âœ…å®Œäº† | 100% (Character, Relationshipä¸¡æ–¹å®Œäº†) |
| Hookså±¤ | âœ…å®Œäº† | 100% (å…¨Hookså®Ÿè£…æ¸ˆã¿) |
| UIå±¤ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ | âœ…å®Œäº† | 100% (åŸºæœ¬ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Œäº†) |
| ãƒšãƒ¼ã‚¸çµ±åˆå±¤ | ğŸš§ä½œæ¥­ä¸­ | 0% (æ¬¡ã®ã‚¿ã‚¹ã‚¯) |
| ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å±¤ | ğŸš§ä½œæ¥­ä¸­ | 0% (æ¬¡ã®ã‚¿ã‚¹ã‚¯) |
| ãƒ†ã‚¹ãƒˆå±¤ï¼ˆBDDï¼‰ | âŒæœªç€æ‰‹ | 0% |

## å®Ÿè£…å®Œäº†ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å±¤
- âœ… `packages/schema/src/character.ts` - Characterå‹å®šç¾©
- âœ… `packages/schema/src/relationship.ts` - Relationshipå‹å®šç¾©
- âœ… `packages/graphdb/src/schemas.ts` - GraphDBã‚¹ã‚­ãƒ¼ãƒ
- âœ… `packages/graphdb/src/queries/characterRepository.ts` - CRUDãƒªãƒã‚¸ãƒˆãƒª
- âœ… `packages/graphdb/src/queries/characterRelationshipGraphRepository.ts` - é–¢ä¿‚æ€§ãƒªãƒã‚¸ãƒˆãƒª

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ - Worker/APIå±¤
- âœ… `apps/frontend/src/entities/character/api/characterGraphApi.ts`
- âœ… `apps/frontend/src/entities/character/api/characterRelationGraphApi.ts`
- âœ… `apps/frontend/src/entities/character/workers/characterGraphHandlers.ts`
- âœ… `apps/frontend/src/entities/character/workers/characterRelationGraphHandlers.ts`
- âœ… `apps/frontend/src/workers/types/handlerMaps.ts` - GlobalHandlerMapçµ±åˆå‹
- âœ… `apps/frontend/src/workers/graphdbWorkerClient.ts` - å‹æ¨è«–æ©Ÿèƒ½è¿½åŠ 

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ - Redux/Hookså±¤
- âœ… `apps/frontend/src/entities/character/model/characterSlice.ts`
- âœ… `apps/frontend/src/entities/character/model/relationshipSlice.ts`
- âœ… `apps/frontend/src/entities/character/actions/characterActions.ts`
- âœ… `apps/frontend/src/entities/character/actions/relationshipActions.ts`
- âœ… `apps/frontend/src/entities/character/hooks/useCharacterList.ts`
- âœ… `apps/frontend/src/entities/character/hooks/useAllRelationships.ts`
- âœ… `apps/frontend/src/entities/character/hooks/useCharacterRelationships.ts`
- âœ… `apps/frontend/src/entities/character/hooks/useCreateRelationship.ts`
- âœ… `apps/frontend/src/entities/character/hooks/useUpdateRelationship.ts`
- âœ… `apps/frontend/src/entities/character/hooks/useDeleteRelationship.ts`

### UIå±¤
- âœ… `packages/ui/src/character/types.ts`
- âœ… `packages/ui/src/character/CharacterList.tsx`
- âœ… `packages/ui/src/character/RelationshipList.tsx`
- âœ… `packages/ui/src/character/RelationshipForm.tsx`
- âœ… `packages/ui/src/character/DeleteRelationshipModal.tsx`
- âœ… `packages/ui/src/character/CharacterRelationshipPage.tsx`
- âœ… `packages/ui/src/character/index.ts`
- âœ… `packages/ui/src/index.ts` - exportè¨­å®š
