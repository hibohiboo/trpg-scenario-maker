Feature: TRPGシナリオ作成の基本フロー
  TRPGシナリオ作成アプリのユーザーとして
  シナリオ、シーン、シーンイベントを作成し、シーンを接続したい
  完全なシナリオを作成できるようにするため

  Scenario: シナリオ作成からシーン接続までの基本フロー
    Given アプリケーションを開いている

    # シナリオ作成
    When "新規作成" ボタンをクリックする
    And タイトルに "新たな冒険" と入力する
    And "作成" ボタンをクリックする
    Then シナリオ一覧に "新たな冒険" が表示される

    # シナリオを開く
    When シナリオ "新たな冒険" をクリックする
    Then シーン編集画面が表示される

    # 最初のシーンを作成
    When "シーンを追加" ボタンをクリックする
    And シーンタイトルに "スタート地点" と入力する
    And 説明に "冒険が始まる場所" と入力する
    And フォームの "作成" ボタンをクリックする
    Then シーン一覧に "スタート地点" が表示される

    # シーンイベントを追加
    When シーン "スタート地点" の編集ボタンをクリックする
    And "イベント追加" ボタンをクリックする
    And イベントタイプで "会話" を選択する
    And イベント内容に "村人が話しかけてくる" と入力する
    And イベントフォームの "追加" ボタンをクリックする
    Then イベント一覧に "村人が話しかけてくる" が表示される

    # 2つ目のシーンを作成
    When モーダルを閉じる
    And "シーンを追加" ボタンをクリックする
    And シーンタイトルに "森の入口" と入力する
    And 説明に "暗い森への入口" と入力する
    And フォームの "作成" ボタンをクリックする
    Then シーン一覧に "森の入口" が表示される

    # シーンを接続
    When シーン "スタート地点" の編集ボタンをクリックする
    And 次のシーンで "森の入口" を選択する
    And "更新" ボタンをクリックする
