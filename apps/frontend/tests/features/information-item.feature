Feature: 情報項目管理
  TRPGシナリオ作成アプリのユーザーとして
  シナリオ内で情報項目（手がかり、秘密、証拠など）を管理したい
  プレイヤーが獲得する情報とシーンの関連を明確にするため

  Background:
    Given アプリケーションを開いている
    And テスト用のシナリオ "謎の屋敷" が存在する

  Scenario: 情報項目を新規作成する
    When シナリオ "謎の屋敷" の詳細ページを開く
    And シナリオ編集ページの "情報項目" のタブをクリックする
    And "新規作成" ボタンをクリックする
    And タイトルに "古びた日記" と入力する
    And 説明に "屋敷の書斎で見つけた古い日記" と入力する
    And フォームの "作成" ボタンをクリックする
    Then 情報項目一覧に "古びた日記" が表示される
  @ignore
  Scenario: 情報項目を更新する
    Given シナリオ "謎の屋敷" に情報項目 "日記" (説明: "古い日記") が登録されている
    When シナリオ "謎の屋敷" の詳細ページを開く
    And シナリオ編集ページの "情報項目" のタブをクリックする
    And 情報項目 "日記" をクリックする
    And タイトルを "主人の日記" に変更する
    And 説明を "屋敷の主人が残した日記。最後のページに暗号が記されている" に変更する
    And フォームの "更新" ボタンをクリックする
    Then 情報項目一覧に "主人の日記" が表示される
  @ignore
  Scenario: 情報項目を削除する
    Given シナリオ "謎の屋敷" に情報項目 "不要な証拠" が登録されている
    And 情報項目 "不要な証拠" の削除ボタンをクリックする
    Then 情報項目一覧に "不要な証拠" が表示されない

  @ignore
  Scenario: 情報項目同士の関連を作成する
    Given シナリオ "謎の屋敷" に情報項目 "日記" が登録されている
    And シナリオ "謎の屋敷" に情報項目 "暗号表" が登録されている
    When シナリオ "謎の屋敷" の詳細ページを開く
    And シナリオ編集ページの "情報項目" のタブをクリックする
    And 情報項目の関連を追加ボタンをクリックする
    And モーダルで関連元 "日記" と関連先 "暗号表" を選択する
    And モーダルの "追加" ボタンをクリックする
    Then 情報項目の関連一覧に "日記" から "暗号表" への関連が表示される
  @ignore
  Scenario: シーンで獲得できる情報を設定する
    Given シナリオ "謎の屋敷" にシーン "書斎の調査" が登録されている
    And シナリオ "謎の屋敷" に情報項目 "日記" が登録されている
    When シナリオ "謎の屋敷" の詳細ページを開く
    And シナリオ編集ページの "シーン" のタブをクリックする
    And シーン "書斎の調査" を編集する
    And "獲得できる情報" セクションで "日記" を選択する
    Then シーン "書斎の調査" の獲得情報に "日記" が表示される
  @ignore
  Scenario: 情報が指し示すシーンを設定する
    Given シナリオ "謎の屋敷" に情報項目 "地下室への鍵" が登録されている
    And シナリオ "謎の屋敷" にシーン "地下室" が登録されている
    When シナリオ "謎の屋敷" の詳細ページを開く
    And シナリオ編集ページの "情報項目" のタブをクリックする
    And 情報項目 "地下室への鍵" をクリックする
    And "指し示すシーン" セクションで "地下室" を選択する
    Then 情報項目 "地下室への鍵" が指し示すシーンに "地下室" が表示される
